@inject IStringLocalizer<Resources> Localizer

@if (!ViewModel.IsError)
{
    <MudItem xs=4>
        <MudTextField Value="ViewModel.City?.Name"
                      ReadOnly=true
                      Label="@Localizer[nameof(Resources.Book_City)]" />
    </MudItem>

    <MudItem xs=4>
        <MudTextField Value="@($"{ViewModel.Car?.Make} {ViewModel.Car?.Model}")"
                      ReadOnly=true
                      Label="@Localizer[nameof(Resources.Book_Car)]" />
    </MudItem>

    <MudItem xs=4>
        <MudTextField Value="ViewModel.Car?.LicensePlate"
                      ReadOnly=true
                      Label="@Localizer[nameof(Resources.Book_LicencePlate)]" />
    </MudItem>

    <MudItem xs="6">
        <MudTextField Value="@ViewModel.StartDate"
                      ReadOnly=true
                      Label="@Localizer[nameof(Resources.Book_StartDate)]" />
    </MudItem>

    <MudItem xs="6">
        <MudTextField Value="@ViewModel.EndDate"
                      ReadOnly=true
                      Label="@Localizer[nameof(Resources.Book_EndDate)]" />
    </MudItem>

    <MudItem xs="6">
        <MudTextField Value="@ViewModel.Car?.PricePerDay"
                      ReadOnly=true
                      Format="C"
                      Label="@Localizer[nameof(Resources.Book_PricePerDay)]" />
    </MudItem>

    <MudItem xs="6">
        <MudTextField Value="@ViewModel.TotalPrice"
                      ReadOnly=true
                      Format="C"
                      Label="@Localizer[nameof(Resources.Book_Price)]" />
    </MudItem>
}

<Loader IsLoading=ViewModel.IsBooking>
    <MudItem xs=6>
        <MudButton Variant="Variant.Filled"
                   Color="Color.Default"
                   Size="Size.Medium"
                   OnClick="@ViewModel.BackCommand.ExecuteAsync">
            @Localizer[nameof(Resources.Book_Back)]
        </MudButton>
    </MudItem>

    <MudItem xs=6>
        <Button Variant="Variant.Filled"
                Color="Color.Primary"
                Size="Size.Medium"
                OnClick="@ViewModel.BookCommand.ExecuteAsync"
                IsVisible=@(!ViewModel.IsError && ViewModel.CanBook)>
            @Localizer[nameof(Resources.Book_BookButton)]
        </Button>
    </MudItem>
</Loader>

@code
{
    [CascadingParameter]
    public NewBookingViewModel ViewModel { get; set; } = null!;
}
