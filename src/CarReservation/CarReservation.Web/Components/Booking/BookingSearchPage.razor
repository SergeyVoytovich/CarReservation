@inherits ViewBase<BookingSearchViewModel>

@attribute [Route(UriCollection.Booking.Root)]

@inject IStringLocalizer<Resources> Localizer

<Title Value="@Localizer[nameof(Resources.Book_Title)]" />

<MudGrid>
    <CascadingValue Value="ViewModel">
        
        <Loader IsLoading=@(!ViewModel.IsInitialized || ViewModel.IsBusy)>
            <BookingFilter />
        </Loader>

        <Loader IsLoading=@ViewModel.IsSearching
                IsVisible=@(!ViewModel.IsBusy && ViewModel.IsInitialized)>
            <BookingList />
        </Loader>

    </CascadingValue>
</MudGrid>


@code
{
    [SupplyParameterFromQuery(Name = UriCollection.Booking.Parameters.CityId)]
    public Guid? CityId { get; set; }

    [SupplyParameterFromQuery(Name = UriCollection.Booking.Parameters.From)]
    public DateTime? From { get; set; } 

    [SupplyParameterFromQuery(Name = UriCollection.Booking.Parameters.Till)]
    public DateTime? Till { get; set; }

    protected override Task OnParametersSetAsync() => ViewModel.InitializeAsync(CityId, From, Till);

}